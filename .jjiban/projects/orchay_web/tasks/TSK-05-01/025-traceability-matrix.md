# TSK-05-01 요구사항 추적 매트릭스

## 문서 정보

| 항목 | 내용 |
|------|------|
| Task ID | TSK-05-01 |
| 문서 버전 | 1.0 |
| 작성일 | 2025-12-28 |

---

## 1. PRD → 설계 추적

| PRD 요구사항 | PRD 섹션 | 설계 섹션 | 설계 내용 |
|-------------|---------|----------|----------|
| 문서 API 엔드포인트 | 3.5 | 12.1 | `GET /api/document/{task_id}/{doc_name}` |
| MD 렌더링 (marked.js) | 3.5 | 12.2 | `marked.parse(text)` 클라이언트 렌더링 |
| Mermaid 지원 | 3.5 | 12.2 | `mermaid.run()` 다이어그램 렌더링 |
| 이미지 표시 | 3.5 | 12.3 | FileResponse로 이미지 반환 |
| 모달 팝업 UI | 3.5 | 5.2 | 와이어프레임 + CSS 정의 |
| ESC 키로 닫기 | 3.5 | 6.3 | keydown 이벤트 핸들러 |
| Path traversal 차단 | 3.5 | 8.2 BR-02 | `is_relative_to()` 검증 |

---

## 2. 설계 → 테스트 추적

| 설계 항목 | 설계 섹션 | 테스트 ID | 테스트 유형 |
|----------|----------|----------|------------|
| API 엔드포인트 | 12.1 | UT-01 ~ UT-04 | 단위 테스트 |
| Path traversal 차단 | 8.2 | UT-03 | 단위 테스트 |
| 허용 확장자 검증 | 8.1 BR-01 | UT-02 | 단위 테스트 |
| 마크다운 렌더링 | 12.2 | E2E-01 | E2E 테스트 |
| Mermaid 렌더링 | 12.2 | E2E-02 | E2E 테스트 |
| 이미지 표시 | 12.3 | E2E-03 | E2E 테스트 |
| 모달 열기/닫기 | 5.2 | E2E-04 | E2E 테스트 |
| ESC 키 닫기 | 6.3 | E2E-05 | E2E 테스트 |

---

## 3. 기능 요구사항 매트릭스

| 기능 ID | 기능명 | PRD | 설계 | 테스트 | 상태 |
|--------|--------|-----|------|--------|------|
| FR-01 | 마크다운 문서 API | 3.5 | 12.1 | UT-01 | 설계완료 |
| FR-02 | 이미지 파일 API | 3.5 | 12.1, 12.3 | UT-04, E2E-03 | 설계완료 |
| FR-03 | marked.js 렌더링 | 3.5 | 12.2 | E2E-01 | 설계완료 |
| FR-04 | Mermaid 다이어그램 | 3.5 | 12.2 | E2E-02 | 설계완료 |
| FR-05 | 모달 UI | 3.5 | 5.2 | E2E-04 | 설계완료 |
| FR-06 | 모달 닫기 (ESC/X/배경) | 3.5 | 6.1, 6.3 | E2E-05 | 설계완료 |

---

## 4. 비기능 요구사항 매트릭스

| 요구사항 ID | 요구사항 | PRD | 설계 | 테스트 |
|------------|---------|-----|------|--------|
| NFR-01 | Path traversal 보안 | 3.5 | 8.2 BR-02 | UT-03 |
| NFR-02 | 허용 확장자 제한 | 3.5 | 8.1 BR-01 | UT-02 |
| NFR-03 | 반응형 모달 | - | 5.3 | 수동 |

---

## 5. 역추적 (테스트 → 설계 → PRD)

| 테스트 ID | 검증 대상 | 설계 근거 | PRD 근거 |
|----------|----------|----------|----------|
| UT-01 | 마크다운 API 정상 응답 | 12.1, 12.3 | 3.5 |
| UT-02 | 허용되지 않는 확장자 차단 | 8.1 BR-01 | 3.5 보안 |
| UT-03 | Path traversal 차단 | 8.2 BR-02 | 3.5 보안 |
| UT-04 | 이미지 API 정상 응답 | 12.1, 12.3 | 3.5 |
| E2E-01 | 마크다운 렌더링 확인 | 12.2 | 3.5 MD 렌더링 |
| E2E-02 | Mermaid 렌더링 확인 | 12.2 | 3.5 Mermaid |
| E2E-03 | 이미지 표시 확인 | 5.2 | 3.5 이미지 |
| E2E-04 | 모달 열기/닫기 확인 | 5.2, 6.1 | 3.5 모달 UI |
| E2E-05 | ESC 키 닫기 확인 | 6.3 | 3.5 ESC |

---

## 변경 이력

| 버전 | 일자 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0 | 2025-12-28 | Claude | 최초 작성 |
