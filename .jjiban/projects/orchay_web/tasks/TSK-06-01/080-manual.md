# TSK-06-01 - 사용자 매뉴얼

## 문서 정보

| 항목 | 내용 |
|------|------|
| Task ID | TSK-06-01 |
| 문서 버전 | 1.0 |
| 작성일 | 2025-12-28 |
| 대상 사용자 | orchay 웹 UI 사용자 |

---

## 1. 개요

### 1.1 기능 소개

트리 패널 개선 기능은 WBS 트리의 사용성을 향상시킵니다:

- **통계 배지**: WP, ACT, Task 개수와 전체 진행률을 한눈에 확인
- **검색창**: Task ID나 제목으로 빠르게 필터링
- **전체 펼치기/접기**: 모든 WP 노드를 일괄로 열거나 닫기
- **WP/ACT 클릭 분리**: 텍스트 클릭으로 상세 정보 확인, 아이콘 클릭으로 트리 열기/닫기

### 1.2 대상 사용자

- orchay 웹 모니터링 UI 사용자
- 프로젝트 진행 상황을 확인하는 PM/개발자

---

## 2. 시작하기

### 2.1 사전 요구사항

- orchay 서버 실행 (`--web` 또는 `--web-only` 옵션)
- 웹 브라우저 (Chrome, Firefox, Edge 권장)

### 2.2 접근 방법

1. orchay 서버 시작:
   ```bash
   uv run python -m orchay PROJECT --web
   # 또는
   uv run python -m orchay PROJECT --web-only --port 8080
   ```

2. 브라우저에서 접속:
   ```
   http://localhost:8080
   ```

---

## 3. 사용 방법

### 3.1 통계 배지

트리 패널 상단에 프로젝트 통계가 표시됩니다:

```
┌─────────────────────────────────────┐
│ WP: 6  ACT: 0  TSK: 16  진행률: 75% │
│ ████████████░░░░                    │
└─────────────────────────────────────┘
```

- **WP**: Work Package 개수
- **ACT**: Activity 개수 (3단계 WBS에서는 0)
- **TSK**: Task 개수
- **진행률**: 완료된 Task 비율 (바 + 퍼센트)

> 통계는 5초마다 자동 갱신됩니다.

### 3.2 Task 검색

검색창에 키워드를 입력하면 실시간으로 필터링됩니다:

```
┌─────────────────────────────────────┐
│ 🔍 Search tasks...                  │
└─────────────────────────────────────┘
```

**검색 예시:**
- `TSK-01` → TSK-01로 시작하는 모든 Task
- `트리` → 제목에 "트리"가 포함된 Task
- `detail` → 제목에 "detail"이 포함된 Task

**동작:**
- 매칭되는 Task가 있는 WP는 자동으로 펼쳐집니다
- 검색어를 지우면 전체 트리가 다시 표시됩니다

### 3.3 전체 펼치기/접기

버튼 클릭으로 모든 WP 노드를 일괄 조작합니다:

```
┌─────────────┐
│ ▼ Collapse  │  ← 클릭하면 모든 WP 접기
└─────────────┘

┌─────────────┐
│ ▶ Expand    │  ← 클릭하면 모든 WP 펼치기
└─────────────┘
```

### 3.4 WP 노드 인터랙션

WP 노드는 두 가지 클릭 영역이 있습니다:

```
   ▶ WP-01: 웹서버 기본 구조
   │       │
   │       └─ 텍스트 클릭: Detail 패널에 WP 정보 표시
   │
   └─ 아이콘(▶/▼) 클릭: 트리 열기/닫기
```

**WP 상세 정보 패널:**
- WP ID 및 제목
- 진행률 바
- Task 개수 (전체/완료)
- 하위 Task 목록

### 3.5 Task 노드 클릭

Task 노드를 클릭하면 우측 Detail 패널에 상세 정보가 표시됩니다:

```
   T TSK-01-01: FastAPI 앱 정의 [xx]
   └─ 클릭 → Detail 패널에 Task 상세 표시
```

---

## 4. FAQ

**Q: 검색 결과가 없으면 어떻게 되나요?**
A: 모든 노드가 숨겨지고 빈 트리가 표시됩니다. 검색어를 지우면 복원됩니다.

**Q: 통계가 실시간으로 업데이트되지 않아요.**
A: HTMX 확장(morph)이 정상 로드되었는지 확인하세요. 브라우저 콘솔에서 오류를 확인할 수 있습니다.

**Q: WP 클릭 시 아무 반응이 없어요.**
A: 텍스트 영역을 클릭했는지 확인하세요. 아이콘(▶/▼) 클릭은 트리만 열고 닫습니다.

---

## 5. 문제 해결

### 5.1 통계가 표시되지 않음

**원인:** API 응답에 stats 객체가 없음

**해결:**
1. 서버 로그 확인
2. `/api/tree` 응답에 stats 포함 여부 확인
3. 서버 재시작

### 5.2 검색이 동작하지 않음

**원인:** JavaScript 오류

**해결:**
1. 브라우저 콘솔(F12) 열기
2. `filterTree is not defined` 오류 확인
3. index.html에 filterTree 함수 정의 확인

### 5.3 펼치기/접기 버튼이 동작하지 않음

**원인:** toggleExpandAll 함수 미정의

**해결:**
1. index.html에 toggleExpandAll 함수 확인
2. 버튼의 onclick 속성 확인

---

## 6. 참고 자료

- [PRD 3.6.2 트리 패널 개선](../prd.md)
- [TSK-06-01 설계 문서](./010-design.md)
- [TSK-06-01 구현 보고서](./030-implementation.md)

---

## 변경 이력

| 버전 | 일자 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0 | 2025-12-28 | Claude | 최초 작성 |
