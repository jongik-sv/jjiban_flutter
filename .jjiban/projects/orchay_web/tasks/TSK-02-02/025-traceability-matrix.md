# 요구사항 추적성 매트릭스 (025-traceability-matrix.md)

**Template Version:** 1.0.0 — **Last Updated:** 2025-12-28

> **목적**: PRD → 기본설계 → 상세설계 → 테스트 4단계 양방향 추적
>
> **참조**: 이 문서는 `010-design.md`와 `026-test-specification.md`와 함께 사용됩니다.

---

## 0. 문서 메타데이터

| 항목 | 내용 |
|------|------|
| Task ID | TSK-02-02 |
| Task명 | 트리 템플릿 구현 |
| 설계 참조 | `010-design.md` |
| 테스트 명세 참조 | `026-test-specification.md` |
| 작성일 | 2025-12-28 |
| 작성자 | Claude |

---

## 1. 기능 요구사항 추적 (FR → 설계 → 테스트)

> PRD → 설계 → 테스트케이스 매핑

| 요구사항 ID | PRD 섹션 | 설계 섹션 | 단위 테스트 | E2E 테스트 | 매뉴얼 TC | 상태 |
|-------------|----------|----------|-------------|------------|-----------|------|
| FR-001 | 3.1 계층 표시 | 5.2 트리 노드 구조 | UT-001 | E2E-001 | TC-001 | 설계완료 |
| FR-002 | 3.1 상태 표시 | 5.4 상태별 색상 매핑 | UT-002 | E2E-001 | TC-002 | 설계완료 |
| FR-003 | 3.1 진행률 | 5.3 노드별 HTML 구조 | UT-003 | E2E-002 | TC-001 | 설계완료 |
| FR-004 | 3.1 확장/축소 | 5.3 WP 노드, 6.1 인터랙션 | UT-004 | E2E-003 | TC-003 | 설계완료 |

### 1.1 요구사항별 상세 매핑

#### FR-001: 계층 표시 (WP > ACT > TSK)

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 3.1 | Project > WP > ACT > TSK 계층 표시 |
| 설계 | 010-design.md | 5.2 | 와이어프레임: 계층 구조 시각화 |
| 설계 | 010-design.md | 5.5 | 들여쓰기 규칙: pl-0, pl-4, pl-8 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-001: 노드 렌더링 테스트 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-001: 트리 계층 표시 확인 |

#### FR-002: 상태 기호별 색상 표시

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 3.1 | 상태 기호 [bd], [dd], [xx] 등 색상으로 표시 |
| TRD | trd.md | 상태 색상 | STATUS_COLORS 매핑 정의 |
| 설계 | 010-design.md | 5.4 | 10가지 상태별 Tailwind 색상 클래스 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-002: 상태 색상 매핑 테스트 |
| 매뉴얼 테스트 | 026-test-specification.md | 4.1 | TC-002: 상태별 색상 확인 |

#### FR-003: 진행률 표시

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 3.1 | 각 WP/ACT의 완료율 표시 |
| 설계 | 010-design.md | 5.3 | WP 노드에 progress 필드 표시 |
| 설계 | 010-design.md | 8.1 | BR-05: 진행률은 WP/ACT에만 표시 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-003: 진행률 표시 테스트 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-002: 진행률 정확성 확인 |

#### FR-004: 확장/축소 아이콘

| 설계 단계 | 문서 | 섹션 | 구현 항목 |
|----------|------|------|----------|
| PRD | prd.md | 3.1 | 클릭으로 하위 노드 토글 |
| TRD | trd.md | 트리 UI 구현 | CSS 애니메이션, max-height 전환 |
| 설계 | 010-design.md | 5.3 | ▶/▼ 아이콘, data-expanded 속성 |
| 설계 | 010-design.md | 6.1 | 호버/클릭 피드백 정의 |
| 단위 테스트 | 026-test-specification.md | 2.1 | UT-004: 토글 상태 테스트 |
| E2E 테스트 | 026-test-specification.md | 3.1 | E2E-003: 확장/축소 인터랙션 |

---

## 2. 비즈니스 규칙 추적 (BR → 구현 → 검증)

| 규칙 ID | PRD 출처 | 설계 섹션 | 구현 위치 | 단위 테스트 | E2E 테스트 | 검증 방법 | 상태 |
|---------|----------|----------|----------|-------------|------------|-----------|------|
| BR-01 | 3.1 | 8.1 | tree.html 매크로 | UT-004 | E2E-003 | 하위 있으면 토글 표시 | 설계완료 |
| BR-02 | 3.1 | 8.1 | render_task_node | UT-005 | E2E-004 | Task 클릭 시 상세 로드 | 설계완료 |
| BR-03 | TRD | 8.1 | status_colors 딕셔너리 | UT-002 | E2E-001 | 상태별 색상 정확성 | 설계완료 |
| BR-04 | 3.1 | 8.1 | is_selected 조건 | UT-006 | E2E-004 | 선택 노드 시각적 강조 | 설계완료 |
| BR-05 | 3.1 | 8.1 | WP/ACT 매크로 | UT-003 | E2E-002 | 진행률 WP/ACT에만 표시 | 설계완료 |

### 2.1 비즈니스 규칙별 상세 매핑

#### BR-01: WP/ACT 확장/축소 토글

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 클릭으로 하위 노드 토글 |
| **설계 표현** | `data-expanded` 속성, ▶/▼ 아이콘 전환 |
| **구현 위치** | tree.html render_wp_node 매크로 |
| **검증 방법** | 하위 노드 존재 시 토글 아이콘 표시 확인 |
| **관련 테스트** | UT-004, E2E-003 |

#### BR-03: 상태 색상 매핑

| 구분 | 내용 |
|------|------|
| **PRD 원문** | 상태 기호 [bd], [dd], [xx] 등 색상으로 표시 |
| **TRD 정의** | STATUS_COLORS 딕셔너리 (workflows.json 연동) |
| **설계 표현** | 10가지 상태별 Tailwind bg-{color}-500 클래스 |
| **검증 방법** | 각 상태 코드별 정확한 색상 렌더링 확인 |
| **관련 테스트** | UT-002, E2E-001, TC-002 |

---

## 3. 테스트 역추적 매트릭스

> 테스트 결과 → 요구사항 역추적용

| 테스트 ID | 테스트 유형 | 검증 대상 요구사항 | 검증 대상 비즈니스 규칙 | 상태 |
|-----------|------------|-------------------|----------------------|------|
| UT-001 | 단위 | FR-001 | - | 미실행 |
| UT-002 | 단위 | FR-002 | BR-03 | 미실행 |
| UT-003 | 단위 | FR-003 | BR-05 | 미실행 |
| UT-004 | 단위 | FR-004 | BR-01 | 미실행 |
| UT-005 | 단위 | - | BR-02 | 미실행 |
| UT-006 | 단위 | - | BR-04 | 미실행 |
| E2E-001 | E2E | FR-001, FR-002 | BR-03 | 미실행 |
| E2E-002 | E2E | FR-003 | BR-05 | 미실행 |
| E2E-003 | E2E | FR-004 | BR-01 | 미실행 |
| E2E-004 | E2E | - | BR-02, BR-04 | 미실행 |
| TC-001 | 매뉴얼 | FR-001, FR-003 | - | 미실행 |
| TC-002 | 매뉴얼 | FR-002 | BR-03 | 미실행 |
| TC-003 | 매뉴얼 | FR-004 | BR-01 | 미실행 |

---

## 4. 데이터 모델 추적

> 설계 데이터 → 템플릿 컨텍스트 매핑

| 설계 데이터 | Jinja2 컨텍스트 | 템플릿 사용 위치 |
|------------|----------------|-----------------|
| TreeNode.id | `node.id` | data-id 속성 |
| TreeNode.type | `node.type` | 매크로 분기 조건 |
| TreeNode.title | `node.title` | 노드 제목 텍스트 |
| TreeNode.status | `node.status` | 상태 배지 텍스트 |
| TreeNode.progress | `node.progress` | 진행률 % 표시 |
| TreeNode.level | `node.level` | 들여쓰기 계산 |
| status_colors | `status_colors` | 상태별 색상 클래스 조회 |
| selected_id | `selected_id` | 선택 상태 판단 |

---

## 5. 인터페이스 추적

> API 응답 → 템플릿 매핑

| API 엔드포인트 | 템플릿 파일 | 렌더링 대상 | 요구사항 |
|---------------|------------|-----------|----------|
| GET /api/tree | tree.html | 전체 트리 | FR-001, FR-002, FR-003 |
| GET /api/tree/{wp_id} | tree.html (부분) | WP 하위 노드 | FR-004 |

---

## 6. 화면 추적

> 설계 화면 → 템플릿 컴포넌트 매핑

| 설계 화면 | 템플릿 파일 | 매크로/블록 | 요구사항 |
|----------|------------|------------|----------|
| WBS 트리 패널 | tree.html | 메인 렌더링 블록 | FR-001 |
| WP 노드 | tree.html | render_wp_node | FR-003, FR-004 |
| ACT 노드 | tree.html | render_act_node | FR-001, FR-003 |
| Task 노드 | tree.html | render_task_node | FR-001, FR-002 |
| 빈 상태 | tree.html | empty-tree div | - |

---

## 7. 추적성 검증 요약

### 7.1 커버리지 통계

| 구분 | 총 항목 | 매핑 완료 | 미매핑 | 커버리지 |
|------|---------|----------|--------|---------|
| 기능 요구사항 (FR) | 4 | 4 | 0 | 100% |
| 비즈니스 규칙 (BR) | 5 | 5 | 0 | 100% |
| 단위 테스트 (UT) | 6 | 6 | 0 | 100% |
| E2E 테스트 | 4 | 4 | 0 | 100% |
| 매뉴얼 테스트 (TC) | 3 | 3 | 0 | 100% |

### 7.2 미매핑 항목

| 구분 | ID | 설명 | 미매핑 사유 |
|------|-----|------|-----------|
| - | - | - | 모든 항목 매핑 완료 |

---

## 관련 문서

- 설계: `010-design.md`
- 테스트 명세: `026-test-specification.md`
- 트리 API 설계: `../TSK-02-01/010-design.md`
- PRD: `.jjiban/projects/orchay_web/prd.md`
- TRD: `.jjiban/projects/orchay_web/trd.md`

---

<!--
TSK-02-02 요구사항 추적성 매트릭스
Version: 1.0
-->
