# TSK-02-03 테스트 명세서

## 문서 정보

| 항목 | 내용 |
|------|------|
| Task ID | TSK-02-03 |
| 문서 버전 | 1.0 |
| 작성일 | 2025-12-28 |

---

## 1. 테스트 개요

### 1.1 테스트 범위

| 범위 | 포함 | 제외 |
|------|------|------|
| 기능 | 노드 토글, Task 선택, 자동 갱신 | Task 상세 API (TSK-03-01) |
| UI | 애니메이션, 하이라이트 | 반응형 레이아웃 |
| 에러 | 네트워크 오류, 404 | 서버 내부 오류 |

### 1.2 테스트 환경

| 항목 | 사양 |
|------|------|
| 브라우저 | Chrome 최신, Firefox 최신 |
| 화면 크기 | 1920x1080 (데스크톱) |
| 네트워크 | 로컬 (localhost:8080) |

---

## 2. E2E 테스트 케이스

### TC-01: WP 노드 확장

| 항목 | 내용 |
|------|------|
| ID | TC-01 |
| 목적 | WP 노드 클릭 시 하위 노드가 펼쳐지는지 확인 |
| 사전 조건 | WP-02가 접힌 상태 (▶) |
| 테스트 단계 | 1. WP-02 노드 클릭<br>2. 하위 노드 표시 확인<br>3. 아이콘 ▼ 변경 확인 |
| 예상 결과 | 하위 ACT/Task가 표시됨, 아이콘 ▼ |
| 통과 기준 | 0.5초 내 응답, 애니메이션 동작 |

### TC-02: WP 노드 축소

| 항목 | 내용 |
|------|------|
| ID | TC-02 |
| 목적 | 펼쳐진 WP 노드 클릭 시 하위 노드가 숨겨지는지 확인 |
| 사전 조건 | WP-02가 펼쳐진 상태 (▼) |
| 테스트 단계 | 1. WP-02 노드 클릭<br>2. 하위 노드 숨김 확인<br>3. 아이콘 ▶ 변경 확인 |
| 예상 결과 | 하위 노드가 숨겨짐, 아이콘 ▶ |
| 통과 기준 | 애니메이션 0.3초 |

### TC-03: Task 선택

| 항목 | 내용 |
|------|------|
| ID | TC-03 |
| 목적 | Task 클릭 시 상세 패널이 업데이트되는지 확인 |
| 사전 조건 | TSK-02-03이 표시된 상태 |
| 테스트 단계 | 1. TSK-02-03 노드 클릭<br>2. 상세 패널 로드 확인<br>3. 선택 하이라이트 확인 |
| 예상 결과 | 우측 패널에 TSK-02-03 상세 표시 |
| 통과 기준 | 1초 내 응답 |

### TC-04: Task 선택 전환

| 항목 | 내용 |
|------|------|
| ID | TC-04 |
| 목적 | 다른 Task 선택 시 상세 패널이 갱신되는지 확인 |
| 사전 조건 | TSK-02-01이 선택된 상태 |
| 테스트 단계 | 1. TSK-02-02 클릭<br>2. 상세 패널 변경 확인<br>3. 이전 선택 해제 확인 |
| 예상 결과 | TSK-02-02 상세 표시, TSK-02-01 하이라이트 해제 |
| 통과 기준 | 정확한 전환 |

### TC-05: 자동 갱신

| 항목 | 내용 |
|------|------|
| ID | TC-05 |
| 목적 | 5초마다 트리가 자동 갱신되는지 확인 |
| 사전 조건 | 페이지 로드 완료 |
| 테스트 단계 | 1. 네트워크 탭 열기<br>2. 10초 대기<br>3. /api/tree 요청 확인 |
| 예상 결과 | 5초마다 /api/tree 요청 발생 (2회) |
| 통과 기준 | 자동 갱신 동작 |

### TC-06: 애니메이션 시간

| 항목 | 내용 |
|------|------|
| ID | TC-06 |
| 목적 | 확장/축소 애니메이션이 0.3초인지 확인 |
| 사전 조건 | WP 노드 표시 |
| 테스트 단계 | 1. 스톱워치 준비<br>2. WP 노드 클릭<br>3. 애니메이션 시간 측정 |
| 예상 결과 | 약 0.3초 (300ms) |
| 통과 기준 | 200-400ms 범위 |

### TC-07: 네트워크 오류 처리

| 항목 | 내용 |
|------|------|
| ID | TC-07 |
| 목적 | 네트워크 오류 시 에러 메시지 표시 확인 |
| 사전 조건 | 개발자 도구에서 오프라인 모드 활성화 |
| 테스트 단계 | 1. 오프라인 모드 설정<br>2. Task 노드 클릭<br>3. 에러 메시지 확인 |
| 예상 결과 | 에러 토스트 또는 메시지 표시 |
| 통과 기준 | 사용자 친화적 에러 표시 |

### TC-08: 404 오류 처리

| 항목 | 내용 |
|------|------|
| ID | TC-08 |
| 목적 | 존재하지 않는 Task 요청 시 에러 처리 확인 |
| 사전 조건 | 삭제된 Task ID 준비 |
| 테스트 단계 | 1. URL 직접 접속: /api/detail/TSK-99-99<br>2. 응답 확인 |
| 예상 결과 | 404 응답, 에러 메시지 |
| 통과 기준 | graceful 에러 처리 |

---

## 3. 단위 테스트 케이스

### UT-01: 트리 노드 HTML 생성

| 항목 | 내용 |
|------|------|
| ID | UT-01 |
| 대상 | tree.html 템플릿 렌더링 |
| 입력 | WP/ACT/Task 리스트 |
| 예상 출력 | 올바른 HTMX 속성 포함된 HTML |

### UT-02: 상태 클래스 매핑

| 항목 | 내용 |
|------|------|
| ID | UT-02 |
| 대상 | STATUS_COLORS 매핑 |
| 입력 | "[ ]", "[dd]", "[xx]" |
| 예상 출력 | "bg-gray-500", "bg-purple-500", "bg-emerald-500" |

---

## 4. 테스트 우선순위

| 우선순위 | 테스트 케이스 | 이유 |
|---------|-------------|------|
| P1 | TC-01, TC-03 | 핵심 기능 |
| P2 | TC-02, TC-04, TC-05 | 보조 기능 |
| P3 | TC-06, TC-07, TC-08 | 품질 향상 |

---

## 5. 변경 이력

| 버전 | 일자 | 변경 내용 |
|------|------|----------|
| 1.0 | 2025-12-28 | 최초 작성 |
