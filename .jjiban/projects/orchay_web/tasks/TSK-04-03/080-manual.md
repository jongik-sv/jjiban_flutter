# orchay 웹 UI 사용자 매뉴얼

## 1. 개요

### 1.1 기능 소개

orchay Web UI는 브라우저에서 WBS 진행 상황을 모니터링할 수 있는 웹 인터페이스입니다.

**주요 기능:**
- WBS 트리 구조 시각화 (WP → ACT → Task)
- Task 상세 정보 확인
- Worker 상태 실시간 모니터링
- 5초 주기 자동 갱신

### 1.2 대상 사용자

| 사용자 | 활용 시나리오 |
|--------|-------------|
| 개발자 | 로컬 개발 시 진행 상황 모니터링 |
| 관리자 | 원격에서 프로젝트 상태 확인 |
| 팀원 | 전체 Task 진행률 확인 |

---

## 2. 시작하기

### 2.1 사전 요구사항

- orchay 설치 완료
- Python >= 3.10
- 웹 관련 의존성 설치 (`fastapi`, `uvicorn`, `jinja2`)

```bash
cd orchay
uv pip install -e ".[dev]"
```

### 2.2 웹서버 실행

**방법 1: 스케줄러 + 웹서버 동시 실행**
```bash
uv run python -m orchay jjiban --web
```

**방법 2: 웹서버만 실행 (스케줄링 없음)**
```bash
uv run python -m orchay jjiban --web-only
```

**방법 3: launcher.py와 함께 사용**
```bash
python orchay/launcher.py my_project --web
```

### 2.3 접속 방법

웹서버 시작 후 브라우저에서 접속:
```
http://localhost:8080
```

포트를 변경한 경우:
```
http://localhost:{지정한 포트}
```

---

## 3. 사용 방법

### 3.1 CLI 옵션

| 옵션 | 설명 | 기본값 |
|------|------|--------|
| `--web` | 스케줄러 + 웹서버 동시 실행 | 비활성화 |
| `--web-only` | 웹서버만 실행 | - |
| `--port PORT` | 웹서버 포트 번호 | 8080 |

> **Note:** `--web`과 `--web-only`는 상호 배타적 옵션입니다.

### 3.2 화면 구성

```
┌─────────────────────────────────────────────────────┐
│                    orchay Web UI                     │
├─────────────────────────┬───────────────────────────┤
│                         │                           │
│      WBS 트리 (50%)     │    Task 상세 (50%)        │
│                         │                           │
│  ▼ WP-01: 웹서버 기본   │  TSK-01-01               │
│    ▼ TSK-01-01 ✅       │  FastAPI 앱 및 라우트    │
│    ▼ TSK-01-02 ✅       │  상태: done [xx]         │
│    ▼ TSK-01-03 ✅       │  우선순위: critical      │
│  ▶ WP-02: WBS 트리 UI   │  ...                     │
│                         │                           │
├─────────────────────────┴───────────────────────────┤
│  Worker: [1: idle 🟢] [2: busy 🟡] [3: idle 🟢]    │
└─────────────────────────────────────────────────────┘
```

### 3.3 WBS 트리

- **클릭**: 노드 확장/축소
- **Task 클릭**: 우측 상세 패널에 정보 표시
- **상태 색상**:
  - 🟢 완료 (`[xx]`)
  - 🟡 진행중 (`[im]`, `[vf]`)
  - ⚪ 대기 (`[ ]`, `[bd]`, `[dd]`)

### 3.4 Task 상세

선택한 Task의 다음 정보를 표시:
- Task ID, 제목
- 카테고리, 도메인
- 상태, 우선순위
- 담당자, 일정
- 의존성, 태그
- 관련 문서 링크

### 3.5 Worker 상태

화면 하단에 각 Worker 상태 표시:
- 🟢 **idle**: 대기 중 (작업 할당 가능)
- 🟡 **busy**: 작업 중
- 🔴 **error**: 오류 발생
- 🟣 **paused**: 일시정지

---

## 4. FAQ

### Q1: 웹서버가 시작되지 않습니다

**A:** 웹 관련 의존성이 설치되어 있는지 확인하세요.
```bash
uv pip install fastapi uvicorn jinja2
```

### Q2: 포트가 이미 사용 중입니다

**A:** `--port` 옵션으로 다른 포트를 지정하세요.
```bash
uv run python -m orchay jjiban --web --port 3000
```

### Q3: 화면이 자동으로 갱신되지 않습니다

**A:** HTMX가 올바르게 로드되었는지 확인하세요. 브라우저 개발자 도구에서 네트워크 요청을 확인하세요.

### Q4: `--web-only`와 `--web`의 차이는?

**A:**
- `--web`: TUI/CLI 스케줄러 + 웹서버 동시 실행 (Worker 분배 활성화)
- `--web-only`: 웹서버만 실행 (스케줄링 없음, WezTerm 불필요)

---

## 5. 문제 해결

### 5.1 일반적인 문제

| 증상 | 원인 | 해결 방법 |
|------|------|----------|
| 빈 화면 | WBS 파일 없음 | 프로젝트 경로 확인 |
| 404 에러 | 잘못된 URL | `http://localhost:8080` 확인 |
| 느린 로딩 | 네트워크 문제 | CDN 연결 확인 (HTMX, Tailwind) |

### 5.2 로그 확인

상세 로그를 보려면 `-v` 옵션 사용:
```bash
uv run python -m orchay jjiban --web -v
```

---

## 6. 참고 자료

- [orchay README.md](../../../../../orchay/README.md)
- [FastAPI 공식 문서](https://fastapi.tiangolo.com/)
- [HTMX 공식 문서](https://htmx.org/)

---

## 변경 이력

| 버전 | 일자 | 변경 내용 |
|------|------|----------|
| 1.0 | 2025-12-28 | 최초 작성 |
